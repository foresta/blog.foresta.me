+++
thumbnail = ""
tags = ["architecture"]
date = "2018-08-30T21:08:40+09:00"
title = "書籍「Clean Architecture」を読んだまとめ"
categories = ["engineering"]


+++

普段からソフトウェアの設計やアーキテクチャに関心があり色々調べていたのですが、
最近発売された、「Clean Architecture」がとても良さそうなので読みました。

結果すごく良かったのでエッセンスをまとめます。


## 書籍「Clean Architecture」 

<a href="https://www.amazon.co.jp/Clean-Architecture-%E9%81%94%E4%BA%BA%E3%81%AB%E5%AD%A6%E3%81%B6%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E3%81%AE%E6%A7%8B%E9%80%A0%E3%81%A8%E8%A8%AD%E8%A8%88-Robert-C-Martin/dp/4048930656/ref=as_li_ss_il?ie=UTF8&qid=1535631136&sr=8-1&keywords=clean+architecture&linkCode=li2&tag=foresta04-22&linkId=6ec8d1ab1df87b69ef6b3ab74487c680&language=ja_JP" target="_blank"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=4048930656&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=foresta04-22&language=ja_JP" ></a><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=foresta04-22&language=ja_JP&l=li2&o=9&a=4048930656" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />

<a href="https://amzn.to/2PmQNjx">Clean Architecture 達人に学ぶソフトウェア構造と設計</a>


この本は、「ソフトウェアの価値とはなんなのか」という着眼点から始まり、プログラミングのパラダイムに軽く触れたのちに、アーキテクチャの話に深く入っていきます。

題名から、いわゆる設計手法としての「Clean Architecture」についての話かと思いがちですが
内容はアーキテクチャとは何か、どういった目的意識があるのかいうアーキテクチャ全体的な概念などの非常にためになる話が多くいくつも気づきがありました。

以下、簡単にまとめます。

## ソフトウェアの価値とは

ソフトウェアの価値は、「提供する機能」と「更新できること」にあります。

「提供する機能」とはそのままの意味で、そのソフトウェアが問題を解決することに価値があるということです。

「更新できること」は需要や周りの環境の変化に応じてソフトウェアが変化できること自体に価値があるということです。\
ソフトウェアの「ソフト」とは柔軟に変化できることを表していて、継続的に更新できることは大きな価値になり得ます。

## アーキテクチャとオブジェクト指向

アーキテクチャの目的とは、ソフトウェア継続的に更新し続けられる柔軟な状態にすることにあると言えるでしょう。\
このため、変更が頻繁に起きるところと少ない箇所を分離しお互いが影響しないように適切にソフトウェアの境界を引いて行くことが重要です。

またソフトウェアには「方針」と「詳細」があるという風に言われています。
方針はソフトウェアがどのように問題を解決するかの方針、つまりはビジネスロジックのことを指します。\
詳細とはデータベースや、フレームワーク、UIなどのことを指します。
この二つのうち、変更が頻繁に起こるのは「詳細」の方だと思います。

ソフトウェアの目的は「方針」側にあります。 (データベースの種類や、どのフレームワークを使用するかなどの詳細はソフトウェアの本質ではないということ) \
この「方針」が「詳細」の変更に影響されないように（詳細に依存しないように）依存関係を管理することがアーキテクトの腕の見せ所です。


依存関係を完全に管理するためには、オブジェクト指向プログラミング (以下OOP) のパラダイムが非常に役に立ちます。\
OOPの特徴であるポリモーフィズムにより、オブジェクト (あるいはコンポーネント) 同士の依存の方向を制御することができます。

具体的には、SOLIDの原則のDIP (依存関係逆転の法則) で依存の方向を逆転させることで、方針が詳細に依存しないようにして行くことができます。

---

ちなみに、SOLIDの原則については以下の本に非常に詳しく書かれています。

<a href="https://www.amazon.co.jp/%E3%82%A2%E3%82%B8%E3%83%A3%E3%82%A4%E3%83%AB%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E9%96%8B%E7%99%BA%E3%81%AE%E5%A5%A5%E7%BE%A9-%E7%AC%AC2%E7%89%88-%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E6%8C%87%E5%90%91%E9%96%8B%E7%99%BA%E3%81%AE%E7%A5%9E%E9%AB%84%E3%81%A8%E5%8C%A0%E3%81%AE%E6%8A%80-%E3%83%AD%E3%83%90%E3%83%BC%E3%83%88%E3%83%BBC%E3%83%BB%E3%83%9E%E3%83%BC%E3%83%81%E3%83%B3/dp/4797347783/ref=as_li_ss_il?s=books&ie=UTF8&qid=1535632664&sr=1-1&keywords=%E3%82%A2%E3%82%B8%E3%83%A3%E3%82%A4%E3%83%AB%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2%E9%96%8B%E7%99%BA%E3%81%AE%E5%A5%A5%E7%BE%A9&linkCode=li2&tag=foresta04-22&linkId=ed8164701550e84efcfb6410fbdff6eb&language=ja_JP" target="_blank"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=4797347783&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=foresta04-22&language=ja_JP" ></a><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=foresta04-22&language=ja_JP&l=li2&o=9&a=4797347783" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />

<a href="https://amzn.to/2NutKCD">アジャイルソフトウェア開発の奥義 第2版 オブジェクト指向開発の神髄と匠の技</a>

私もこの本に出会うまでは、SOLIDの原則について全く知りませんでした。
非常に分厚く読み応えがすごいですが、今ではプログラミングをする上の指針となる大事な原則を得られ、読んで良かったと思える一冊です。

---

話を戻しまして、書籍「Clean Architecture」には、ソフトウェアのどこに境界を引くのか、依存関係をどうやって管理するのか、についての具体的なエッセンスが多く書かれていました。

ここでは詳細には触れませんが、どのようにコンポーネントを分離するのかや、設計手法であるクリーンアーキテクチャの紹介などが印象的でした。

アーキテクチャの概念等の抽象的な話題から、実際にどうアーキテクチャを考えて行くかの指標になる具体的な話題まで揃っていて非常にお得感のある本でした。

## 感想

最初にこの本を読もうと思ったのが、kindle版の無料サンプルで公開されている以下の文を読んでこれは面白そうだぞっと感じたのがきっかけです。

> 崩壊したコードを書くほうがクリーンなコードを書くよりも常に遅い \
> Ｒｏｂｅｒｔ Ｃ．Ｍａｒｔｉｎ; 角 征典; 高木 正弘. Clean Architecture  達人に学ぶソフトウェアの構造と設計 (アスキードワンゴ) (Kindle の位置No.460). 株式会社ドワンゴ. Kindle 版.
 
他には、

> 「あとでクリーンにすればいいよ。先に市場に出さなければ！」開発者たちはそうやっていつもごまかす。だが、あとでクリーンにすることはない。市場からのプレッシャーは止まらないからだ。「先に市場に出さなければ」ということは、後ろに競合他社が大勢いるということである。競合他社に追い抜かれないためには、 これからも走り続けるしかない。\
> Ｒｏｂｅｒｔ Ｃ．Ｍａｒｔｉｎ; 角 征典; 高木 正弘. Clean Architecture  達人に学ぶソフトウェアの構造と設計 (アスキードワンゴ) (Kindle の位置No.448-452). 株式会社ドワンゴ. Kindle 版.  

といった分も心に刺さりました。

{{< tweet 1030106692153892864 >}}

## まとめ

この本を読み、コードを書くときの自分の中の指標がアップデートされたので純粋に読んで良かったと思います。

アーキテクチャが必要な規模のソフトウェアに携わっていて、興味はあるけど日々悩みながら開発しているような方にお勧めできる良い本でした。
